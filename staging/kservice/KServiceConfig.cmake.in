@PACKAGE_INIT@

# Any changes in this file will be overwritten by CMake.

set(KService_INSTALL_PREFIX "@PACKAGE_CMAKE_INSTALL_PREFIX@")
set_and_check(KService_INCLUDE_DIR    "@PACKAGE_INCLUDE_INSTALL_DIR@")

include("${CMAKE_CURRENT_LIST_DIR}/KServiceTargets.cmake")

macro(DESKTOP_TO_JSON _target _input)
    set(_output)
    set(desktoptojson_EXECUTABLE /home/sebas/kf5/install/bin/desktoptojson)
    string(REPLACE ".desktop" ".json" _output ${_input})

    set(_in ${CMAKE_CURRENT_SOURCE_DIR}/${_input})
    set(_out ${CMAKE_CURRENT_SOURCE_DIR}/${_output})

    set(targ ${_target}Json)

    message("\n\n =========== RUNNING MACRO ===============")
    message(" EXE: ${desktoptojson_EXECUTABLE}")
    message(" IN: ${_in}")
    message(" OUT: ${_out}")
    message(" TAR: ${targ}")

    add_custom_target(${targ} ALL DEPENDS ${_in})
    add_custom_command(
        TARGET ${targ} PRE_BUILD
        #OUTPUT ${_out}
        COMMAND ${desktoptojson_EXECUTABLE} -i ${_in} -o ${_out}
        WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}
        DEPENDS ${_in}
        )
    message("\n\n")
endmacro(DESKTOP_TO_JSON)


set(KService_LIBRARIES KF5::KService)
set(KService_INCLUDE_DIRS ${KService_INCLUDE_DIR} )
